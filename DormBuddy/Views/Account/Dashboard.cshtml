@{
    ViewData["Title"] = "Dashboard";
}

<div class="dashboard-container">
    <div class="dashboard-header">
        <h1>User Dashboard</h1>
        @if (TempData["message"] != null)
        {
            <div class="alert alert-success">
                @TempData["message"]
            </div>
        }
        @if (ViewBag.ErrorMessage != null)
        {
            <div class="alert alert-danger" role="alert">
                @ViewBag.ErrorMessage
            </div>
        }
        <p>Welcome <b>@ViewBag.Username</b>!</p>
        <p>
            @foreach (var role in ViewBag.UserRoles.Split(','))
            {
                <span class="role-badge @role.Trim().ToLower()">@role.Trim()</span>
            }
        </p>
    </div>

    <div class="dashboard-grid">
        <div class="card dashboard-card card-tasks">
            <div class="card-header">
                <i class="fas fa-tasks fa-lg"></i>
                Task Management
            </div>
            <div class="card-body">
                <p>Manage your dorm-related tasks and track progress.</p>
                <a href="@Url.Action("Tasks", "Account")" class="btn btn-light">View Tasks</a>
            </div>
        </div>

        <div class="card dashboard-card card-expenses">
            <div class="card-header">
                <i class="fas fa-money-bill-wave fa-lg"></i>
                Expense Splitting
            </div>
            <div class="card-body">
                <p>Track shared expenses and manage balance with dormmates.</p>
                <a href="@Url.Action("Expenses", "Account")" class="btn btn-light">View Expenses</a>
            </div>
        </div>

        <div class="card dashboard-card card-lending">
            <div class="card-header">
                <i class="fas fa-handshake fa-lg"></i>
                Peer-to-Peer Lending
            </div>
            <div class="card-body">
                <p>Manage loans and transactions with your dormmates.</p>
                <a href="@Url.Action("Lending", "Account")" class="btn btn-light">View Lending</a>
            </div>
        </div>

        <div class="card dashboard-card card-help">
            <div class="card-header">
                <i class="fas fa-question-circle fa-lg"></i>
                Help & Support
            </div>
            <div class="card-body">
                <p>Need assistance? Reach out for help with any issues.</p>
                <a href="#" class="btn btn-light">Get Help</a>
            </div>
        </div>
    </div>

    @if (ViewBag.UserRoles.Contains("Admin") || ViewBag.UserRoles.Contains("Moderator"))
    {
        <div class="admin-panel">
            <div class="card dashboard-card card-admin">
                <div class="card-header">
                    <i class="fas fa-shield-alt fa-lg"></i>
                    @(ViewBag.UserRoles.Contains("Admin") ? "Admin Panel" : "Moderator Panel")
                </div>
                <div class="card-body">
                    <p>Manage site-wide settings and users.</p>
                    <a href="#" class="btn btn-light">Go to @(ViewBag.UserRoles.Contains("Admin") ? "Admin" : "Moderator") Panel</a>
                </div>
            </div>
        </div>
    }
</div>