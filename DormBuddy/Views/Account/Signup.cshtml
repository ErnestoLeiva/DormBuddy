@{
    ViewData["Title"] = "Sign Up";
}

<div class="text-center">
    <h1 class="display-4">Sign Up</h1>
    <p>Fill out the form to sign up!</p>

    @* Display error message if it exists *@
    @if (ViewBag.ErrorMessage != null)
    {
        <div class="alert alert-danger" role="alert">
            @ViewBag.ErrorMessage
        </div>
    }
</div>

<div class="container mt-4" style="max-width: 400px;">
    <form method="post" action="/Account/Signup">
        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" class="form-control" id="email" name="email" placeholder="Enter email" required>
        </div>
        <div class="form-group">
            <label for="username">Username</label>
            <input type="text" class="form-control" id="username" name="username" placeholder="Enter username" required>
        </div>

        <div class="form-group mt-3 position-relative">
            <label for="password">Password</label>
            <input type="password" class="form-control" id="password" name="password" placeholder="Enter password" required>
            <span class="position-absolute" style="right: 10px; top: 50%; transform: translateY(-295%); cursor: pointer;">
                <i class="fa fa-eye" id="togglePassword"></i>
            </span>

            @* Password Requirements *@
            <small class="form-text text-muted">
                Password must be:
                <ul>
                    <li>At least 6 characters long</li>
                    <li>Contain at least 1 digit (0-9)</li>
                    <li>Contain at least 1 lowercase letter (a-z)</li>
                    <li>Contain at least 1 uppercase letter (A-Z)</li>
                    <li>Contain at least 1 non-alphanumeric character (e.g., @@, #, $)</li>
                </ul>
            </small>
        </div>

        <div class="form-group mt-3 position-relative">
            <label for="reenterpassword">Re-Enter Password</label>
            <input type="password" class="form-control" id="reenterpassword" name="reenterpassword" placeholder="Re-Enter password" required>
            <span class="position-absolute" style="right: 10px; top: 50%; transform: translateY(20%); cursor: pointer;">
                <i class="fa fa-eye" id="toggleReEnterPassword"></i>
            </span>
        </div>

        <div class="form-group">
            <label for="firstname">First Name</label>
            <input type="text" class="form-control" id="firstname" name="firstname" placeholder="First Name" required>
        </div>

        <div class="form-group">
            <label for="lastname">Last Name</label>
            <input type="text" class="form-control" id="lastname" name="lastname" placeholder="Last Name" required>
        </div>

        <button type="submit" class="btn btn-primary mt-4 btn-block">Sign Up</button>
    </form>
</div>

@section Scripts { 
    <script> 
        // Handle clicking the password-toggle eye icon
        const passwordInput = document.getElementById('password');
        const togglePassword = document.getElementById('togglePassword');
        const reEnterPasswordInput = document.getElementById('reenterpassword');
        const toggleReEnterPassword = document.getElementById('toggleReEnterPassword');

        togglePassword.addEventListener('click', function () {
            // Toggle the type attribute (makes it either visible or hidden)
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            
            // Toggle the eye / eye-slash icon
            this.classList.toggle('fa-eye-slash');
        });

        toggleReEnterPassword.addEventListener('click', function () {
            // Toggle the type attribute (makes it either visible or hidden)
            const type = reEnterPasswordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            reEnterPasswordInput.setAttribute('type', type);
            
            // Toggle the eye / eye-slash icon
            this.classList.toggle('fa-eye-slash');
        });
    </script>
}
