@{
    ViewData["Title"] = "Account Settings";
}

<div class="settings-container">
    <!-- Return Button -->
    <a href="/Account/Dashboard" class="return-button">
        <i class="fa fa-chevron-left"></i> Return to Dashboard
    </a>
    <!-- Enhanced Header -->
    <div class="settings-header">
        <h1>Account Settings</h1>
        <p>Customize your experience and manage your account preferences</p>
    </div>

    <!-- Navigation Tabs -->
    <div class="settings-tabs">
        <button id="general-settings-btn" 
                onclick="loadSettings('GeneralSettings')" 
                class="tab-button tab-general">
            <i class="fas fa-cog me-2"></i>
            General Settings
        </button>
        <button id="account-settings-btn" 
                onclick="loadSettings('AccountSettings')" 
                class="tab-button tab-account">
            <i class="fas fa-user me-2"></i>
            Account Settings
        </button>
        <button id="privacy-settings-btn" 
                onclick="loadSettings('PrivacySettings')" 
                class="tab-button tab-privacy">
            <i class="fas fa-shield-alt me-2"></i>
            Privacy Settings
        </button>
    </div>

    <!-- Content Area -->
    <div class="settings-content" id="settings-content">
    </div>
</div>

@section Scripts {
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings('GeneralSettings');
        });

        function loadSettings(page) {
            // Build the button ID correctly
            const buttonId = page.toLowerCase().replace('settings', '-settings') + '-btn';
            
            // Update active button state
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.style.opacity = '0.8';
                btn.classList.remove('active');
            });
            
            const activeButton = document.getElementById(buttonId);
            if (activeButton) {
                activeButton.style.opacity = '1';
                activeButton.classList.add('active');
            }

            // Simple fade out
            $('#settings-content').fadeOut(200, function() {
                // Load new content
                $.ajax({
                    url: '/Account/LoadSettings',
                    type: 'GET',
                    data: { settingsPage: page },
                    success: function(data) {
                        $('#settings-content').html(data).fadeIn(200);
                    },
                    error: function(xhr, status, error) {
                        console.error('Error loading settings:', error);
                    }
                });
            });
        }
    </script>
}