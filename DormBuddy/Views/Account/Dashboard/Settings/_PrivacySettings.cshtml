@model DormBuddy.Models.UserProfile


<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        

        <link rel="stylesheet" href="~/css/settings.css" asp-append-version="true" />
        
        <title>General Settings</title>

        <style>
            button {
                padding: 10px 20px;
                background-color: #007bff;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                font-size: 1.1em;
            }

            button:hover {
                background-color: #0056b3;
            }
        </style>
    </head>
    <body>


        <div class="settings-container container mt-5">
        <h2 class="mb-4">Privacy Settings</h2>
        @if (User?.Identity != null && User?.Identity.IsAuthenticated != null)
        {
            string profileVisibility = User.FindFirst("ProfileVisibility")?.Value ?? "public"; 
            string dataSharing = User.FindFirst("DataSharing")?.Value ?? "yes"; 

            <!-- Privacy Setting -->
            <div class="mb-3 form-group">
                <label for="privacySetting" class="form-label">Privacy Setting</label>
                <form asp-controller="Imgur" asp-action="UpdateVisibility" method="post">
                    <select name="ProfileVisibleToPublic" id="privacySetting" class="form-control">
                        @Html.Raw($"<option value='true' {(Model.ProfileVisibleToPublic ? "selected" : "")}>Public</option>")
                        @Html.Raw($"<option value='false' {(!Model.ProfileVisibleToPublic ? "selected" : "")}>Private</option>")
                    </select>
                    <button type="submit" class="btn btn-primary" style="margin-top:20px;">Save Changes</button>
                </form>
            </div>

            <div class="form-group">
                <label for="data-sharing" class="font-weight-bold">Data Sharing</label>
                <select id="data-sharing" class="form-control">
                    <option value="yes" selected="@((dataSharing == "yes") ? "selected" : "")">Yes</option>
                    <option value="no" selected="@((dataSharing == "no") ? "selected" : "")">No</option>

                </select>
            </div>

            <button type="submit" class="btn btn-primary mt-3">Save Changes</button>
        }
        else
        {
            <div class="alert alert-warning mt-3">
                Please log in to manage your privacy settings.
            </div>
        }
    </div>


    </body>
</html>
