@{
    ViewData["Title"] = "Login";
}

<div class="text-center">
    <h1 class="display-4">User Login</h1>
    <p>Enter Your User Credentials To Get Started!</p>

    @* Display error message if it exists *@
    @if (ViewBag.ErrorMessage != null)
    {
        <div class="alert alert-danger" role="alert">
            @ViewBag.ErrorMessage
        </div>
    }
</div>

<div class="container mt-4" style="max-width: 400px;">
    <form method="post" action="/Account/Login">
        <div class="form-group">
            <label for="username">Username or Email</label>
            <input type="text" class="form-control" id="username" name="username" placeholder="Enter username or email" required>
        </div>

        <div class="form-group mt-3 position-relative">
            <label for="password">Password</label>
            <input type="password" class="form-control" id="password" name="password" placeholder="Enter password" required>
            <span class="position-absolute" style="right: 10px; top: 50%; cursor: pointer;">
                <i class="fa fa-eye" id="togglePassword"></i>
            </span>
        </div>

        <button type="submit" class="btn btn-primary mt-4 btn-block">Login</button>
    </form>
</div>

@section Scripts { 
    <script> 
        // Handle clicking the password-toggle eye icon
        const passwordInput = document.getElementById('password');
        const togglePassword = document.getElementById('togglePassword');

        togglePassword.addEventListener('click', function () {
            // Toggle the type attribute (makes it either visible or hidden)
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            
            // Toggle the eye / eye-slash icon
            this.classList.toggle('fa-eye-slash');
        });
    </script>
}
